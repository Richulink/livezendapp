<app-navbar></app-navbar>

<!-- la clase ner tardo en andar-->
<div id="fondo" class="ner position-relative bottom-0 pt-4 ">
    <div class="container mt-4 mb-6 ">
        <div class="d-flex justify-content-center row  ">
            <div class="col-md-8  ">

                <app-modal></app-modal>
<!-- modal edit-->
                <div class="modal fade " id="exampleModalLong" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content sombra2" style="border-radius: 20px;">


                            <div class="modal-body ">


                                <h4> <i class="bi bi-pencil-square m-2">
                                    </i>Titulo</h4>
                                <input style="border-radius: 15px ;" type="text" placeholder="Nuevo Título"
                                    class="form-control red-input  p-2 " aria-label="Username">

                                <div class="p-2">

                                    <!--[(ngModel)]= "nuevaDescripcion" -->

                                    <textarea style="border-radius: 8px;" class="  p-2 form-control " placeholder=""
                                        rows="15" id="message-text">
                          </textarea>
                                </div>

                            </div>
                            <div class="modal-footer ">
                                <button type="button" class="btn btn-success bordeboton float-sm-start">Limpiar</button>
                                <button type="button" class="btn btn-secondary bordeboton m-2"[routerLink]= "['/feed']"
                                    data-bs-dismiss="modal">Cerrar</button>

                                <button type="button" class="btn btn-primary bordeboton "> Guardar cambios</button>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- / modal edit-->

<!-- modal crear-->
                <div class="modal fade rounded " id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <form class="modal-dialog" [formGroup]=crear_nota (ngSubmit)="agregarNota()">
                        <div class="modal-content">
                            <div class="modal-header ">
                                <input style="border-radius: 15px ;" type="text" placeholder="Nombre de la nota"
                                    formControlName="nombre_nota" class="form-control red-input " aria-label="Username">

                                <button type="reset" value="limpiarFormulario  " class="btn-close"
                                    data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <textarea style="border-radius: 8px;" class="form-control red-input gray "
                                    placeholder="Escriba la nota" formControlName="descripcion" rows="15"
                                    id="message-text">

      </textarea>

                            </div>
                            <p Style="text-align:center; color: #FF0000 ;" *ngIf="submitted && crear_nota.invalid">los
                                elementos estan vacíos</p>
                            <button type="submit" class="btn btn-outline-success btn-lg btn-block p-3 m-2 ">
                                Publicar</button>
                        </div>
                    </form>
                </div>

<!-- /modal crear-->
                <div class="feed ">
                    <div class="d-flex flex-row justify-content-between align-items-center p-2 bg-white sombra martop"
                        style="border-radius: 22px;">
                        <div class="d-flex flex-row align-items-center feed-text px-2"  
                        *ngIf= "userLogged|async as user; else btnIngresar">
                            <img class="rounded-circle" [src] =" user.photoURL" width="35">
                        </div>


 <!--ingresar texto modal-->
                        <input class="form-control" style="border-radius: 15px;"
                            placeholder=" Crea una nueva publicación" href="/feed" data-bs-toggle="modal"
                            data-bs-target="#staticBackdrop" readonly>


 <!--ingresar imagen-->
                        <div class="feed-icon px-2">
                            <i class="fa fa-long-arrow-up text-black-50"></i>
                        </div>
                        <button type="button" style="border-radius: 100px;" class="btn btn-secondary ">
                            <i class="bi bi-image" width="45"></i>
                        </button>
                    </div>



                    <div class="bg-white border rounded mt-4 sombra" *ngFor="let notas of notas ">
                        <div>
                            <div class="d-flex flex-row justify-content-between align-items-center  border-bottom ">
                                <div class="d-flex flex-row align-items-center feed-text px-2"
                                    *ngIf="userLogged|async as user; else btnIngresar">
                                    <img class="rounded-circle" [src]="user.photoURL" width="45">
                                    <div class="d-flex flex-column flex-wrap ml-2 ">


                                        <span class="font-weight-bold m-2"> {{user.displayName?
                                            user.displayName:user.email}}
                                        </span>
                                        <span class="text-black-50 time m-2">
                                            <p id="omos "> {{notas.fechade_creacion * 1000 | date:'MM/dd h:mm a'}}</p>
                                        </span>


                                    </div>

                                </div>



                                <div class="p-3">
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle" type="button"
                                            data-bs-toggle="dropdown" aria-expanded="false">

                                            <i class="bi bi-book p-2"></i>

                                        </button>
                                        <ul class="dropdown-menu">
                                            
                                            <li><a class="dropdown-item" [routerLink]= "['/feed/',notas.id]"
                                                    (click)="getNotasById(notas.descripcion)" data-bs-toggle="modal"
                                                    data-bs-target="#exampleModalLong">

                                                    <!--edit modal-->
                                                    <i class="bi bi-pencil-square">
                                                    </i> Editar
                                                </a>

                                            </li>
                                            <li><a class="dropdown-item" (click)="eliminarNota(notas.id)">
                                                    <i class="bi bi-eraser-fill"></i> Borrar</a>
                                            </li>
                                            <li><a class="dropdown-item">
                                                    <i class="bi bi-at"></i>Etiquetar</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="rounded">
                            <span>
                                <div id="fpapel" class="rounded ">
                                    <h6 class="sombra2" style="background-color: #3b492d">
                                        <p style="color:#ffffff">{{notas.nombre_nota}}</p>
                                    </h6>
                                    <div class="container ">
                                        <p> {{notas.descripcion}}</p>


                                    </div>

                                </div>
                            </span>

                        </div>

                    </div>

                    <div class="d-flex justify-content-end socials p-2 py-3"><i class="fa fa-thumbs-up"></i><i
                            class="fa fa-comments-o"></i><i class="fa fa-share"></i></div>

                    <ng-template #btnIngresar>

                    </ng-template>
                </div>